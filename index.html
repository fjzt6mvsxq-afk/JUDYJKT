<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Oscar & Judy's Jakarta Trip</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa;
            -webkit-tap-highlight-color: transparent;
        }
        .font-serif-display {
            font-family: 'Playfair Display', serif;
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .btn-active:active {
            transform: scale(0.96);
            opacity: 0.9;
        }
        /* Canva È¢®Ê†ºÈô∞ÂΩ± */
        .canva-shadow {
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.15);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-[#f0f4f8] text-slate-800">

<div id="app" class="relative min-h-screen pb-24">

    <!-- 1. È†ÅÈ¶ñ Header Area (ÁæéÂåñÁâà) -->
    <!-- ‰øÆÊ≠£ÔºöÈ´òÂ∫¶Â¢ûÂä†Âà∞ h-80ÔºåÁ¢∫‰øùÊúâË∂≥Â§†Á©∫Èñì -->
    <div class="relative bg-teal-900 h-80 w-full overflow-hidden rounded-b-[40px] shadow-2xl z-0">
        <!-- ËÉåÊôØÂúñÔºöÊõ¥ÂÖ∑Âç∞Â∞ºÈ¢®ÊÉÖ -->
        <img src="https://images.unsplash.com/photo-1570533136641-6e3e551383de?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover opacity-60" alt="Indonesia Resort">
        
        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-teal-900/40 via-teal-900/20 to-teal-900/90"></div>
        
        <!-- Ê®ôÈ°åÊñáÂ≠ó -->
        <div class="absolute top-12 left-6 right-6 text-white z-10">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-4xl font-serif-display font-bold tracking-wide drop-shadow-lg">Jakarta <span class="text-yellow-400">Trip</span></h1>
                    <p class="text-sm opacity-90 font-medium mt-1 tracking-widest uppercase">Oscar & Judy's Adventure</p>
                </div>
                <!-- Ë£ùÈ£æÊÄßÂúãÊóó -->
                <div class="bg-white/10 p-2 rounded-xl backdrop-blur-sm border border-white/20">
                    <span class="text-2xl">üáÆüá©</span>
                </div>
            </div>
            
            <div class="mt-4 inline-flex items-center gap-2 bg-black/20 backdrop-blur-md px-3 py-1.5 rounded-full border border-white/10">
                <i class="fa-regular fa-calendar text-yellow-400 text-xs"></i>
                <span class="text-xs font-bold text-white">Dec 12 - Dec 15, 2025</span>
            </div>
        </div>

        <!-- ‰øÆÊ≠£Á∂†Ëâ≤ÂúàÈáçÁñäÔºöTabs ‰∏äÁßª‰∏¶Áç®Á´ãÈ°ØÁ§∫ -->
        <div class="absolute bottom-20 left-6 right-6 z-20">
            <div class="glass-effect rounded-2xl p-2 flex justify-around items-center shadow-lg">
                <button @click="currentTab = 'itinerary'" :class="currentTab === 'itinerary' ? 'text-yellow-400 bg-white/10' : 'text-white/70'" class="flex-1 py-2 rounded-xl flex flex-col items-center transition duration-300">
                    <i class="fa-solid fa-map-location-dot text-xl mb-1"></i>
                    <span class="text-[10px] font-bold">Ë°åÁ®ã</span>
                </button>
                <button @click="currentTab = 'info'" :class="currentTab === 'info' ? 'text-yellow-400 bg-white/10' : 'text-white/70'" class="flex-1 py-2 rounded-xl flex flex-col items-center transition duration-300">
                    <i class="fa-solid fa-circle-info text-xl mb-1"></i>
                    <span class="text-[10px] font-bold">Ë≥áË®ä</span>
                </button>
                <button @click="currentTab = 'shopping'" :class="currentTab === 'shopping' ? 'text-yellow-400 bg-white/10' : 'text-white/70'" class="flex-1 py-2 rounded-xl flex flex-col items-center transition duration-300">
                    <i class="fa-solid fa-basket-shopping text-xl mb-1"></i>
                    <span class="text-[10px] font-bold">Ê∏ÖÂñÆ</span>
                </button>
                <button @click="currentTab = 'expense'" :class="currentTab === 'expense' ? 'text-yellow-400 bg-white/10' : 'text-white/70'" class="flex-1 py-2 rounded-xl flex flex-col items-center transition duration-300">
                    <i class="fa-solid fa-coins text-xl mb-1"></i>
                    <span class="text-[10px] font-bold">Ëä±Ë≤ª</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ‰∏ªÂÖßÂÆπÂçÄÂ°ä (Ë≤†ÈÇäË∑ùÈäúÊé•) -->
    <!-- ‰øÆÊ≠£ÔºöÂõ†ÁÇ∫ Header ËÆäÈ´ò‰∏î Tabs ‰∏äÁßªÔºåÈÄôË£°ÁöÑË≤†ÈÇäË∑ùÂèØ‰ª•Á®çÂæÆÊ∏õÂ∞èÔºåËÆìË¶ñË¶∫Êõ¥ËàíÈÅ© -->
    <div class="relative -mt-6 px-4 z-10">

        <!-- ===== TAB 1: ÊØèÊó•Ë°åÁ®ãË°® ===== -->
        <div v-if="currentTab === 'itinerary'" class="animate-fade-in-up">
            
            <!-- Êó•ÊúüÈÅ∏ÊìáÂô® -->
            <div class="bg-white rounded-2xl p-2 shadow-lg mb-5 flex overflow-x-auto no-scrollbar space-x-2">
                <div v-for="(day, index) in days" :key="index" 
                     @click="selectedDayIndex = index"
                     :class="selectedDayIndex === index ? 'bg-teal-800 text-white shadow-md' : 'bg-transparent text-gray-400 hover:bg-gray-50'"
                     class="flex-shrink-0 flex-1 min-w-[70px] h-16 rounded-xl flex flex-col items-center justify-center transition-all duration-300 cursor-pointer btn-active">
                    <span class="text-[10px] font-bold uppercase tracking-wider">{{ day.weekday }}</span>
                    <span class="text-xl font-bold font-serif-display">{{ day.date }}</span>
                </div>
            </div>

            <!-- Â§©Ê∞£ Widget (Canva Style) -->
            <div class="relative bg-gradient-to-r from-blue-500 to-cyan-400 rounded-2xl p-5 text-white mb-6 canva-shadow overflow-hidden">
                <div class="absolute right-0 top-0 w-32 h-32 bg-white/10 rounded-full -mr-10 -mt-10 blur-xl"></div>
                <div class="relative z-10 flex justify-between items-center">
                    <div>
                        <div class="text-xs font-bold uppercase tracking-widest opacity-80"><i class="fa-solid fa-location-dot mr-1"></i>Jakarta</div>
                        <div class="text-4xl font-serif-display font-bold mt-2">31¬∞C</div>
                        <div class="text-xs mt-2 font-medium bg-white/20 inline-block px-2 py-1 rounded-full backdrop-blur-sm">È´îÊÑü 36¬∞C ‚Ä¢ ÊΩÆÊøï</div>
                    </div>
                    <div class="text-5xl drop-shadow-md">
                        <i class="fa-solid fa-cloud-sun text-yellow-300"></i>
                    </div>
                </div>
            </div>

            <!-- Ë°åÁ®ãÂàóË°® -->
            <div class="space-y-8 pb-20">
                <div v-for="(item, index) in filteredItinerary" :key="item.id" class="relative pl-6 border-l-2 border-dashed border-gray-300 last:border-0">
                    
                    <!-- Ë£ùÈ£æÊÄßÂúìÈªû -->
                    <div class="absolute -left-[9px] top-6 w-4 h-4 rounded-full bg-white border-4 border-teal-600 shadow-sm z-10"></div>

                    <!-- ‰∫§ÈÄöÊôÇÈñì (Pill Shape) -->
                    <div v-if="index > 0 || (index === 0 && selectedDayIndex > 0)" class="absolute -left-[24px] -top-6 bg-white text-slate-500 text-[10px] px-3 py-1 rounded-full border border-gray-200 shadow-sm font-bold z-10 flex items-center gap-1">
                        <i class="fa-solid fa-person-walking text-teal-600"></i>
                        <span>{{ item.travelTime || '15 min' }}</span>
                    </div>

                    <!-- Ë°åÁ®ãÂç°Áâá -->
                    <div class="bg-white p-5 rounded-2xl canva-shadow relative group overflow-hidden">
                        <!-- Âè≥‰∏äËßíË£ùÈ£æ (Categories) -->
                        <div class="absolute top-0 right-0 p-3">
                            <span :class="getCategoryColor(item.category)" class="text-[10px] font-bold px-2 py-1 rounded-lg text-white shadow-sm uppercase tracking-wide">
                                {{ item.category }}
                            </span>
                        </div>

                        <div class="flex items-start gap-4 mt-2">
                            <!-- ÂúñÁ§∫ -->
                            <div class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-teal-700 shadow-inner flex-shrink-0">
                                <i :class="getCategoryIcon(item.category)" class="text-lg"></i>
                            </div>
                            
                            <!-- ÂÖßÂÆπ -->
                            <div class="flex-1 min-w-0">
                                <h3 class="font-bold text-lg text-slate-800 leading-snug pr-12">{{ item.name }}</h3>
                                
                                <div class="flex flex-wrap items-center gap-3 mt-2">
                                    <span v-if="item.time" class="text-xs text-slate-500 font-medium bg-slate-100 px-2 py-0.5 rounded">
                                        <i class="fa-regular fa-clock mr-1"></i>{{ item.time }}
                                    </span>
                                </div>

                                <!-- ‰øÆÊ≠£Á¥ÖËâ≤ÂúàÔºöÊîæÂ§ßÂ≠óÈ´î„ÄÅÂ¢ûÂä†ËÉåÊôØÂ∞çÊØî -->
                                <div v-if="item.notes" class="mt-4 p-3 bg-yellow-50 rounded-xl border border-yellow-100 relative">
                                    <div class="absolute left-0 top-3 bottom-3 w-1 bg-yellow-400 rounded-r-full"></div>
                                    <p class="text-base font-medium text-slate-800 pl-2 leading-relaxed">
                                        {{ item.notes }}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Â∞éËà™ÊåâÈàï (Â∫ïÈÉ®ÂÖ®ÂØ¨) -->
                        <div class="mt-4 pt-3 border-t border-gray-100 flex items-center justify-between">
                             <div class="flex gap-3">
                                <button @click.stop="moveItem(index, -1)" class="w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 hover:text-teal-600 transition"><i class="fa-solid fa-arrow-up text-xs"></i></button>
                                <button @click.stop="deleteItineraryItem(item.id)" class="w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 hover:text-red-500 transition"><i class="fa-regular fa-trash-can text-xs"></i></button>
                            </div>
                            <button @click.stop="openMap(item.name)" class="btn-active bg-teal-50 text-teal-700 px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 hover:bg-teal-100 transition shadow-sm">
                                <i class="fa-solid fa-location-arrow"></i>
                                Â∞éËà™ÂâçÂæÄ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ÁÑ°Ë°åÁ®ãÊèêÁ§∫ -->
                <div v-if="filteredItinerary.length === 0" class="text-center py-16">
                    <img src="https://cdn-icons-png.flaticon.com/512/7486/7486747.png" class="w-24 mx-auto opacity-50 mb-4 grayscale" alt="Relax">
                    <p class="text-slate-400 font-medium">‰∫´ÂèóÁâáÂàªÂØßÈùú...</p>
                </div>
            </div>

            <!-- Êñ∞Â¢ûÊåâÈàï (Êá∏ÊµÆ) -->
            <button @click="showAddModal = true" class="fixed bottom-8 right-6 bg-teal-800 text-white w-14 h-14 rounded-full shadow-2xl flex items-center justify-center text-2xl z-50 btn-active ring-4 ring-white/50">
                <i class="fa-solid fa-plus"></i>
            </button>
        </div>


        <!-- ===== TAB 2: Ë≥áË®ä ===== -->
        <div v-if="currentTab === 'info'" class="space-y-6 pb-24 animate-fade-in-up">
            
            <!-- ÂåØÁéáÊèõÁÆó -->
            <div class="bg-white p-6 rounded-2xl canva-shadow relative overflow-hidden">
                <div class="absolute -right-4 -top-4 w-20 h-20 bg-yellow-400/20 rounded-full blur-2xl"></div>
                <h3 class="font-bold text-slate-800 mb-5 flex items-center gap-2">
                    <i class="fa-solid fa-coins text-yellow-500"></i>
                    ÂåØÁéáÊèõÁÆó <span class="text-xs font-normal text-gray-400 ml-1">(IDR ‚áÑ HKD)</span>
                </h3>
                <div class="flex items-center gap-3">
                    <div class="flex-1 bg-gray-50 p-3 rounded-xl border border-gray-100 focus-within:ring-2 focus-within:ring-teal-500 transition">
                        <label class="text-[10px] text-gray-400 font-bold uppercase block mb-1">Âç∞Â∞ºÁõæ (IDR)</label>
                        <input type="number" v-model="calcIDR" @input="convertCurrency('IDR')" class="w-full bg-transparent font-mono font-bold text-lg outline-none text-slate-800" placeholder="0">
                    </div>
                    <i class="fa-solid fa-arrow-right-arrow-left text-gray-300"></i>
                    <div class="flex-1 bg-gray-50 p-3 rounded-xl border border-gray-100 focus-within:ring-2 focus-within:ring-teal-500 transition">
                        <label class="text-[10px] text-gray-400 font-bold uppercase block mb-1">Ê∏ØÂπ£ (HKD)</label>
                        <input type="number" v-model="calcHKD" @input="convertCurrency('HKD')" class="w-full bg-transparent font-mono font-bold text-lg outline-none text-slate-800" placeholder="0">
                    </div>
                </div>
            </div>

            <!-- ÂéªÁ®ãËà™Áè≠ -->
            <div class="bg-white rounded-2xl canva-shadow overflow-hidden group">
                <div class="bg-slate-800 text-white p-4 flex justify-between items-center relative overflow-hidden">
                    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                    <span class="font-bold z-10"><i class="fa-solid fa-plane-departure mr-2 text-yellow-400"></i>ÂéªÁ®ãËà™Áè≠</span>
                    <span class="text-xs font-mono bg-white/10 px-2 py-1 rounded backdrop-blur-md z-10">12 Dec</span>
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <div class="text-center">
                            <div class="text-4xl font-serif-display font-bold text-slate-800">HKG</div>
                            <div class="text-xs text-gray-500 mt-1 uppercase tracking-wide">Hong Kong</div>
                        </div>
                        <div class="flex flex-col items-center px-4 w-full">
                            <div class="text-[10px] text-gray-400 mb-1 font-bold">03H 55M</div>
                            <div class="w-full h-[1px] bg-gray-300 relative">
                                <i class="fa-solid fa-plane absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 text-slate-300 bg-white px-2 text-sm"></i>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl font-serif-display font-bold text-slate-800">CGK</div>
                            <div class="text-xs text-gray-500 mt-1 uppercase tracking-wide">Jakarta</div>
                        </div>
                    </div>
                    <div class="flex justify-between text-lg font-bold text-slate-700 mb-4 px-2">
                        <span>19:05</span>
                        <span>23:00</span>
                    </div>
                    <div class="bg-gray-50 p-3 rounded-xl border border-gray-100 flex items-center justify-center gap-3 text-sm text-slate-600">
                        <span class="font-bold text-teal-700">CX 797</span>
                        <span class="w-1 h-1 bg-gray-300 rounded-full"></span>
                        <span>ÂúãÊ≥∞Ëà™Á©∫</span>
                    </div>
                </div>
            </div>

             <!-- ÂõûÁ®ãËà™Áè≠ -->
             <div class="bg-white rounded-2xl canva-shadow overflow-hidden group">
                <div class="bg-slate-700 text-white p-4 flex justify-between items-center relative overflow-hidden">
                    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                    <span class="font-bold z-10"><i class="fa-solid fa-plane-arrival mr-2 text-yellow-400"></i>ÂõûÁ®ãËà™Áè≠</span>
                    <span class="text-xs font-mono bg-white/10 px-2 py-1 rounded backdrop-blur-md z-10">15 Dec</span>
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <div class="text-center">
                            <div class="text-4xl font-serif-display font-bold text-slate-800">CGK</div>
                            <div class="text-xs text-gray-500 mt-1 uppercase tracking-wide">Jakarta</div>
                        </div>
                        <div class="flex flex-col items-center px-4 w-full">
                             <div class="text-[10px] text-gray-400 mb-1 font-bold">04H 55M</div>
                            <div class="w-full h-[1px] bg-gray-300 relative">
                                <i class="fa-solid fa-plane absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 rotate-180 text-slate-300 bg-white px-2 text-sm"></i>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl font-serif-display font-bold text-slate-800">HKG</div>
                            <div class="text-xs text-gray-500 mt-1 uppercase tracking-wide">Hong Kong</div>
                        </div>
                    </div>
                    <div class="flex justify-between text-lg font-bold text-slate-700 mb-4 px-2">
                        <span>14:30</span>
                        <span>20:25</span>
                    </div>
                     <div class="bg-gray-50 p-3 rounded-xl border border-gray-100 flex items-center justify-center gap-3 text-sm text-slate-600">
                        <span class="font-bold text-teal-700">CX 776</span>
                        <span class="w-1 h-1 bg-gray-300 rounded-full"></span>
                        <span>ÂúãÊ≥∞Ëà™Á©∫</span>
                    </div>
                </div>
            </div>

            <!-- ‰ΩèÂÆø -->
            <div class="bg-white rounded-2xl canva-shadow overflow-hidden">
                <div class="relative h-32">
                    <img src="https://cf.bstatic.com/xdata/images/hotel/max1024x768/49733446.jpg?k=23075c397195c807204983050073010363234988755694723149495116743916&o=&hp=1" class="w-full h-full object-cover" alt="Hotel">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"></div>
                    <div class="absolute bottom-4 left-4 text-white">
                        <h3 class="font-bold text-lg font-serif-display">Pullman Jakarta Thamrin</h3>
                        <div class="flex text-yellow-400 text-xs mt-1">
                            <i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i>
                        </div>
                    </div>
                </div>
                <div class="p-4">
                    <p class="text-sm text-gray-600 mb-4 flex items-start gap-2">
                        <i class="fa-solid fa-map-pin text-red-500 mt-1"></i>
                        Jl. M.H. Thamrin No.59, Jakarta
                    </p>
                    <div class="flex gap-3">
                        <button @click="openMap('Pullman Jakarta Thamrin')" class="flex-1 bg-teal-50 text-teal-800 py-3 rounded-xl text-sm font-bold shadow-sm hover:bg-teal-100 transition">Â∞éËà™</button>
                        <a href="tel:+622131921111" class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-xl text-sm font-bold shadow-sm hover:bg-gray-200 text-center">Êí•ÊâìÈõªË©±</a>
                    </div>
                </div>
            </div>
            
            <!-- Á∑äÊÄ• -->
             <div class="bg-red-50 p-4 rounded-xl border border-red-100 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center text-red-600">
                         <i class="fa-solid fa-shield-halved"></i>
                    </div>
                    <div>
                        <div class="font-bold text-slate-800 text-sm">Á∑äÊÄ•Ê±ÇÂä©</div>
                        <div class="text-xs text-gray-500">Áï∂Â±ÄÈõªË©±</div>
                    </div>
                </div>
                <a href="tel:112" class="bg-white text-red-600 px-4 py-2 rounded-lg text-sm font-bold shadow-sm border border-red-100">Êí•Êâì 112</a>
            </div>
        </div>


        <!-- ===== TAB 3: Ë≥ºÁâ©Ê∏ÖÂñÆ ===== -->
        <div v-if="currentTab === 'shopping'" class="pb-24 animate-fade-in-up">
            <h3 class="font-bold text-2xl text-slate-800 mb-6 font-serif-display pl-2">Shopping List</h3>
            
            <div class="grid grid-cols-2 gap-4">
                <div v-for="(item, index) in shoppingList" :key="index" class="bg-white p-3 rounded-2xl canva-shadow relative group">
                    <button @click="deleteShoppingItem(index)" class="absolute top-2 right-2 w-7 h-7 bg-white/90 backdrop-blur rounded-full shadow flex items-center justify-center text-gray-400 hover:text-red-500 z-10 transition">
                        <i class="fa-solid fa-xmark text-xs"></i>
                    </button>
                    <div class="aspect-square bg-gray-50 rounded-xl mb-3 overflow-hidden flex items-center justify-center relative">
                        <img v-if="item.image" :src="item.image" class="w-full h-full object-cover hover:scale-110 transition duration-500">
                        <div v-else class="text-center text-gray-300">
                            <i class="fa-solid fa-image text-3xl mb-1"></i>
                            <div class="text-[10px]">No Image</div>
                        </div>
                    </div>
                    <div class="px-1">
                        <div class="font-bold text-sm text-slate-800 leading-tight">{{ item.name }}</div>
                        <div class="text-[10px] text-gray-400 mt-1 flex items-center gap-1">
                            <i class="fa-solid fa-shop"></i>
                            {{ item.location || 'Anywhere' }}
                        </div>
                    </div>
                </div>
                
                 <!-- Add Card -->
                <div @click="showShoppingModal = true" class="bg-white border-2 border-dashed border-gray-200 rounded-2xl flex flex-col items-center justify-center text-gray-300 hover:border-yellow-400 hover:text-yellow-500 transition cursor-pointer min-h-[180px]">
                    <i class="fa-solid fa-plus text-3xl mb-2"></i>
                    <span class="text-xs font-bold">Add Item</span>
                </div>
            </div>
        </div>


        <!-- ===== TAB 4: Ëä±Ë≤ª ===== -->
        <div v-if="currentTab === 'expense'" class="pb-24 animate-fade-in-up">
            <!-- Á∏ΩËä±Ë≤ªÂç°Áâá -->
            <div class="bg-slate-800 text-white p-6 rounded-3xl shadow-xl mb-6 relative overflow-hidden">
                <img src="https://www.transparenttextures.com/patterns/stardust.png" class="absolute inset-0 opacity-20">
                <div class="absolute -right-10 -top-10 w-40 h-40 bg-yellow-400/20 rounded-full blur-3xl"></div>
                <div class="relative z-10">
                    <div class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-1">Total Expenses</div>
                    <div class="flex items-baseline gap-2 mt-2">
                        <span class="text-xl text-gray-300 font-serif-display">HKD</span>
                        <span class="text-5xl font-bold font-serif-display tracking-tight">{{ totalExpenseHKD.toLocaleString() }}</span>
                    </div>
                    <div class="mt-4 pt-4 border-t border-white/10 flex justify-between items-center">
                        <div class="flex items-center gap-2 text-yellow-400 text-sm font-bold bg-white/10 px-3 py-1 rounded-full backdrop-blur-md">
                            <i class="fa-solid fa-arrow-right-arrow-left text-xs"></i>
                            IDR {{ (totalExpenseHKD * 2050).toLocaleString() }}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ëä±Ë≤ªÂàóË°® -->
            <div class="bg-white rounded-3xl canva-shadow overflow-hidden">
                <div class="p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50">
                    <span class="font-bold text-slate-700">Recent Transactions</span>
                    <span class="text-xs text-gray-400 bg-white px-2 py-1 rounded border border-gray-200">{{ expenses.length }} items</span>
                </div>
                <div class="divide-y divide-gray-100">
                    <div v-for="(exp, index) in expenses" :key="index" class="p-4 flex justify-between items-center hover:bg-gray-50 transition group">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-2xl bg-teal-50 flex items-center justify-center text-teal-600 shrink-0 text-lg">
                                <i :class="getExpenseIcon(exp.category)"></i>
                            </div>
                            <div>
                                <div class="font-bold text-sm text-slate-800">{{ exp.name }}</div>
                                <div class="text-xs text-gray-400 mt-1 flex items-center gap-2">
                                    <span>{{ exp.date }}</span>
                                    <span class="w-1 h-1 bg-gray-300 rounded-full"></span>
                                    <span class="text-teal-600">{{ exp.payment }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-slate-800 text-base">-{{ Number(exp.amount).toLocaleString() }}</div>
                            <button @click="deleteExpense(index)" class="text-xs text-red-300 hover:text-red-500 mt-1 opacity-0 group-hover:opacity-100 transition">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Êñ∞Â¢ûÊåâÈàï -->
            <button @click="showExpenseModal = true" class="fixed bottom-8 right-6 bg-yellow-500 text-slate-900 w-14 h-14 rounded-full shadow-xl flex items-center justify-center text-2xl z-50 btn-active ring-4 ring-white/50">
                <i class="fa-solid fa-plus"></i>
            </button>
        </div>

    </div>

    <!-- ===== Modals (Ë®≠Ë®àÊÑüÂÑ™Âåñ) ===== -->

    <!-- Êñ∞Â¢ûË°åÁ®ã Modal -->
    <div v-if="showAddModal" class="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
        <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto transition-opacity" @click="showAddModal = false"></div>
        <div class="bg-white w-full sm:w-96 p-6 rounded-t-3xl sm:rounded-3xl pointer-events-auto shadow-2xl transform transition-transform duration-300">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
            <h3 class="font-bold text-xl mb-6 text-slate-800 flex items-center gap-2">
                <span class="w-1 h-6 bg-teal-500 rounded-full"></span> Êñ∞Â¢ûË°åÁ®ã
            </h3>
            <div class="space-y-4">
                <div>
                    <label class="text-xs font-bold text-gray-400 mb-1 block uppercase tracking-wide">Âú∞Èªû/ÂêçÁ®±</label>
                    <input v-model="newItem.name" placeholder="e.g. Dinner at..." class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl focus:ring-2 focus:ring-teal-500 outline-none transition font-medium">
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="text-xs font-bold text-gray-400 mb-1 block uppercase tracking-wide">ÂàÜÈ°û</label>
                        <select v-model="newItem.category" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl outline-none appearance-none font-medium">
                            <option value="ÊôØÈªû">ÊôØÈªû üì∑</option>
                            <option value="ÁæéÈ£ü">ÁæéÈ£ü üç¥</option>
                            <option value="Ë≥ºÁâ©">Ë≥ºÁâ© üõçÔ∏è</option>
                            <option value="‰ΩèÂÆø">‰ΩèÂÆø üè®</option>
                            <option value="‰∫§ÈÄö">‰∫§ÈÄö üöï</option>
                        </select>
                    </div>
                    <div>
                         <label class="text-xs font-bold text-gray-400 mb-1 block uppercase tracking-wide">ÊôÇÈñì</label>
                        <div class="flex gap-1">
                            <input type="time" v-model="newItem.startTime" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl text-xs text-center outline-none">
                        </div>
                    </div>
                </div>

                <div>
                    <label class="text-xs font-bold text-gray-400 mb-1 block uppercase tracking-wide">ÂÇôË®ª</label>
                    <textarea v-model="newItem.notes" placeholder="ÂØ´Èªû‰ªÄÈ∫º..." rows="2" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl outline-none resize-none font-medium"></textarea>
                </div>

                <button @click="addNewItinerary" class="w-full bg-teal-800 text-white py-4 rounded-xl font-bold mt-2 shadow-lg hover:bg-teal-900 transition text-lg">Á¢∫Ë™çÊñ∞Â¢û</button>
            </div>
        </div>
    </div>

    <!-- Êñ∞Â¢ûË≥ºÁâ© Modal -->
    <div v-if="showShoppingModal" class="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
        <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto" @click="showShoppingModal = false"></div>
        <div class="bg-white w-full sm:w-96 p-6 rounded-t-3xl sm:rounded-3xl pointer-events-auto shadow-2xl">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
            <h3 class="font-bold text-xl mb-6 text-slate-800">Add to Wishlist</h3>
            <div class="space-y-4">
                <input v-model="newShop.name" placeholder="Item Name" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl focus:ring-2 focus:ring-yellow-400 outline-none">
                <input v-model="newShop.location" placeholder="Where to buy?" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl outline-none">
                
                <label class="block bg-gray-50 border-2 border-dashed border-gray-300 p-6 rounded-xl text-center cursor-pointer hover:bg-gray-100 transition group">
                    <div class="w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center mx-auto mb-2 text-gray-400 group-hover:text-yellow-500">
                         <i class="fa-solid fa-camera"></i>
                    </div>
                    <span class="text-sm text-gray-500 font-medium">Upload Photo</span>
                    <input type="file" @change="handleImageUpload" class="hidden" accept="image/*">
                </label>
                
                <div v-if="newShop.image" class="h-32 w-full bg-gray-100 rounded-xl overflow-hidden shadow-inner relative">
                     <img :src="newShop.image" class="w-full h-full object-cover">
                </div>
                
                <button @click="addShoppingItem" class="w-full bg-yellow-400 text-slate-900 py-4 rounded-xl font-bold shadow-lg mt-2 text-lg">Save Item</button>
            </div>
        </div>
    </div>

    <!-- Êñ∞Â¢ûËä±Ë≤ª Modal -->
    <div v-if="showExpenseModal" class="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
        <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto" @click="showExpenseModal = false"></div>
        <div class="bg-white w-full sm:w-96 p-6 rounded-t-3xl sm:rounded-3xl pointer-events-auto shadow-2xl">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
            <h3 class="font-bold text-xl mb-6 text-slate-800">New Expense</h3>
            <div class="space-y-4">
                <input v-model="newExpense.name" placeholder="What is it?" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl outline-none">
                <div class="relative">
                    <span class="absolute left-5 top-4 text-gray-400 font-bold text-sm">HKD</span>
                    <input type="number" v-model="newExpense.amount" placeholder="0" class="w-full bg-gray-50 border border-gray-200 p-4 pl-16 rounded-xl font-mono font-bold text-xl outline-none focus:ring-2 focus:ring-green-500">
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <select v-model="newExpense.category" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl outline-none">
                        <option value="È£≤È£ü">È£≤È£ü üçî</option>
                        <option value="‰∫§ÈÄö">‰∫§ÈÄö üöï</option>
                        <option value="Ë≥ºÁâ©">Ë≥ºÁâ© üõçÔ∏è</option>
                        <option value="‰ΩèÂÆø">‰ΩèÂÆø üè®</option>
                        <option value="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ üè∑Ô∏è</option>
                    </select>
                    <select v-model="newExpense.payment" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-xl outline-none">
                        <option value="ÁèæÈáë">ÁèæÈáë üíµ</option>
                        <option value="‰ø°Áî®Âç°">‰ø°Áî®Âç° üí≥</option>
                    </select>
                </div>
                
                <button @click="addExpense" class="w-full bg-slate-800 text-white py-4 rounded-xl font-bold shadow-lg mt-2 text-lg">Save Record</button>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                currentTab: 'itinerary',
                selectedDayIndex: 0,
                showAddModal: false,
                showShoppingModal: false,
                showExpenseModal: false,
                
                // ÂåØÁéá
                calcIDR: '',
                calcHKD: '',
                rate: 0.00049, // 1 IDR = 0.00049 HKD

                days: [
                    { weekday: 'Fri', date: '12', fullDate: '2025-12-12' },
                    { weekday: 'Sat', date: '13', fullDate: '2025-12-13' },
                    { weekday: 'Sun', date: '14', fullDate: '2025-12-14' },
                    { weekday: 'Mon', date: '15', fullDate: '2025-12-15' }
                ],
                itinerary: [
                    // Day 1
                    { id: 1, date: '2025-12-12', name: 'HKG - CGK (CX 797)', time: '19:05 - 23:00', category: '‰∫§ÈÄö', notes: 'ÂúãÊ≥∞Ëà™Á©∫ | Ë´ãÊèêÊó© 2 Â∞èÊôÇÂà∞Ê©üÂ†¥', travelTime: '' },
                    { id: 2, date: '2025-12-12', name: 'Immigrations & Luggage', time: '23:00 - 23:45', category: 'ÂÖ∂‰ªñ', notes: 'ÈÅéÊµ∑ÈóúÂèäÈ†òÂèñË°åÊùé', travelTime: '0 min' },
                    { id: 3, date: '2025-12-12', name: 'Check In Pullman', time: '23:45 - 01:00', category: '‰ΩèÂÆø', notes: 'PULLMAN Jakarta Thamrin Check-in', travelTime: '45 min' },

                    // Day 2
                    { id: 4, date: '2025-12-13', name: 'Bakmi Krekot', time: '09:00 - 10:30', category: 'ÁæéÈ£ü', notes: 'ÈÅìÂú∞Êó©È§êÈ´îÈ©ó', travelTime: '30 min' },
                    { id: 5, date: '2025-12-13', name: 'Sarinah', time: '10:30 - 12:45', category: 'Ë≥ºÁâ©', notes: 'Hunting Batik (Ë†üÊüì)', travelTime: '30 min' },
                    { id: 6, date: '2025-12-13', name: 'Lekko (Grand Indonesia)', time: '12:45 - 14:00', category: 'ÁæéÈ£ü', notes: 'ÂçàÈ§êÊôÇÈñì', travelTime: '15 min' },
                    { id: 7, date: '2025-12-13', name: 'Ranch Market & Food Hall', time: '14:00 - 15:30', category: 'Ë≥ºÁâ©', notes: 'Visit Supermarket (GI & PI)', travelTime: '15 min' },
                    { id: 8, date: '2025-12-13', name: 'Hotel Rest', time: '16:00 - 19:00', category: '‰ΩèÂÆø', notes: 'ÂõûÈ£ØÂ∫ó‰ºëÊÅØ & Ê∫ñÂÇôÂèÉÂä†Â©öÁ¶Æ', travelTime: '30 min' },
                    { id: 9, date: '2025-12-13', name: 'Wedding Party', time: '19:00 - 21:00', category: 'ÂÖ∂‰ªñ', notes: 'ÂèÉÂä†Â©öÁ¶ÆÊôöÂÆ¥', travelTime: '30 min' },

                    // Day 3
                    { id: 10, date: '2025-12-14', name: 'Soto Gubeng', time: '09:00 - 10:30', category: 'ÁæéÈ£ü', notes: 'Êó©È§ê', travelTime: '30 min' },
                    { id: 11, date: '2025-12-14', name: 'Market City PIK', time: '10:30 - 12:15', category: 'Ë≥ºÁâ©', notes: 'Explore Supermarket', travelTime: '45 min' },
                    { id: 12, date: '2025-12-14', name: 'Bandar Djakarta PIK', time: '12:15 - 14:00', category: 'ÁæéÈ£ü', notes: 'Lunch Êµ∑ÈÆÆÈ§êÂª≥', travelTime: '15 min' },
                    { id: 13, date: '2025-12-14', name: 'Lotte Grosir', time: '14:00 - 16:00', category: 'Ë≥ºÁâ©', notes: 'Wholesaler (ÊâπÁôºË≥£Â†¥)', travelTime: '60 min' },
                    { id: 14, date: '2025-12-14', name: 'Grand Lucky', time: '16:00 - 17:45', category: 'Ë≥ºÁâ©', notes: 'Supermarket Êé°Ë≥º', travelTime: '45 min' },
                    { id: 15, date: '2025-12-14', name: 'Pagi Sore Cipete', time: '17:45 - 19:30', category: 'ÁæéÈ£ü', notes: 'Dinner (Áü•ÂêçÂ∑¥Êù±Ëèú)', travelTime: '30 min' },

                     // Day 4
                     { id: 16, date: '2025-12-15', name: 'Bakmi ABUN', time: '09:00 - 10:30', category: 'ÁæéÈ£ü', notes: 'Pasar Baru ÂçÄÂüüÊó©È§ê', travelTime: '30 min' },
                     { id: 17, date: '2025-12-15', name: 'Airport (CGK)', time: '11:30 - 21:30', category: '‰∫§ÈÄö', notes: 'Êê≠‰πò CX 776 ËøîÂõûÊ∫´ÊöñÁöÑÂÆ∂', travelTime: '60 min' }
                ],
                
                newItem: { name: '', category: 'ÊôØÈªû', startTime: '', endTime: '', notes: '' },
                newShop: { name: '', location: '', image: null },
                newExpense: { name: '', amount: '', category: 'È£≤È£ü', payment: 'ÁèæÈáë' },
                shoppingList: [],
                expenses: []
            }
        },
        computed: {
            filteredItinerary() {
                const targetDate = this.days[this.selectedDayIndex].fullDate;
                return this.itinerary.filter(item => item.date === targetDate);
            },
            totalExpenseHKD() {
                return this.expenses.reduce((sum, item) => sum + Number(item.amount), 0);
            }
        },
        created() {
            const savedShopping = localStorage.getItem('jakarta_shopping_v2');
            if (savedShopping) this.shoppingList = JSON.parse(savedShopping);
            
            const savedExpenses = localStorage.getItem('jakarta_expenses_v2');
            if (savedExpenses) this.expenses = JSON.parse(savedExpenses);

            const savedItinerary = localStorage.getItem('jakarta_itinerary_v2');
            if (savedItinerary) this.itinerary = JSON.parse(savedItinerary);
        },
        methods: {
            saveData() {
                localStorage.setItem('jakarta_shopping_v2', JSON.stringify(this.shoppingList));
                localStorage.setItem('jakarta_expenses_v2', JSON.stringify(this.expenses));
                localStorage.setItem('jakarta_itinerary_v2', JSON.stringify(this.itinerary));
            },
            getCategoryColor(cat) {
                const map = { 'ÊôØÈªû': 'bg-blue-500', '‰ΩèÂÆø': 'bg-indigo-500', 'ÁæéÈ£ü': 'bg-orange-500', 'Ë≥ºÁâ©': 'bg-pink-500', '‰∫§ÈÄö': 'bg-slate-500', 'ÂÖ∂‰ªñ': 'bg-gray-400' };
                return map[cat] || 'bg-gray-400';
            },
            getCategoryIcon(cat) {
                const map = { 'ÊôØÈªû': 'fa-camera', '‰ΩèÂÆø': 'fa-bed', 'ÁæéÈ£ü': 'fa-utensils', 'Ë≥ºÁâ©': 'fa-bag-shopping', '‰∫§ÈÄö': 'fa-plane', 'ÂÖ∂‰ªñ': 'fa-circle' };
                return `fa-solid ${map[cat] || 'fa-circle'}`;
            },
            openMap(location) {
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location + " Jakarta")}`, '_blank');
            },
            moveItem(index, direction) {
                const list = this.filteredItinerary;
                const item = list[index];
                const realIndex = this.itinerary.indexOf(item);
                const targetListIndex = index + direction;
                if (targetListIndex < 0 || targetListIndex >= list.length) return;
                const targetItem = list[targetListIndex];
                const targetRealIndex = this.itinerary.indexOf(targetItem);
                [this.itinerary[realIndex], this.itinerary[targetRealIndex]] = [this.itinerary[targetRealIndex], this.itinerary[realIndex]];
                this.saveData();
            },
            deleteItineraryItem(id) {
                if(confirm('Delete this item?')) {
                    this.itinerary = this.itinerary.filter(i => i.id !== id);
                    this.saveData();
                }
            },
            addNewItinerary() {
                if(!this.newItem.name) return;
                const targetDate = this.days[this.selectedDayIndex].fullDate;
                const timeStr = (this.newItem.startTime) ? this.newItem.startTime : '';
                this.itinerary.push({
                    id: Date.now(),
                    date: targetDate,
                    name: this.newItem.name,
                    category: this.newItem.category,
                    time: timeStr,
                    notes: this.newItem.notes,
                    travelTime: '15 min'
                });
                this.saveData();
                this.showAddModal = false;
                this.newItem = { name: '', category: 'ÊôØÈªû', startTime: '', notes: '' };
            },
            convertCurrency(type) {
                if (type === 'IDR') {
                    this.calcHKD = (this.calcIDR * this.rate).toFixed(2);
                } else {
                    this.calcIDR = (this.calcHKD / this.rate).toFixed(0);
                }
            },
            handleImageUpload(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        this.newShop.image = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            },
            addShoppingItem() {
                if(!this.newShop.name) return;
                this.shoppingList.push({...this.newShop});
                this.saveData();
                this.showShoppingModal = false;
                this.newShop = { name: '', location: '', image: null };
            },
            deleteShoppingItem(index) {
                if(confirm('Remove?')) {
                    this.shoppingList.splice(index, 1);
                    this.saveData();
                }
            },
            getExpenseIcon(cat) {
                const map = { '‰∫§ÈÄö': 'fa-taxi', 'È£≤È£ü': 'fa-utensils', '‰ΩèÂÆø': 'fa-hotel', 'Ë≥ºÁâ©': 'fa-bag-shopping', 'ÂÖ∂‰ªñ': 'fa-coins' };
                return `fa-solid ${map[cat] || 'fa-coins'}`;
            },
            addExpense() {
                if(!this.newExpense.name || !this.newExpense.amount) return;
                const today = new Date().toLocaleDateString();
                this.expenses.push({ ...this.newExpense, date: today });
                this.saveData();
                this.showExpenseModal = false;
                this.newExpense = { name: '', amount: '', category: 'È£≤È£ü', payment: 'ÁèæÈáë' };
            },
            deleteExpense(index) {
                if(confirm('Delete record?')) {
                    this.expenses.splice(index, 1);
                    this.saveData();
                }
            }
        }
    }).mount('#app');
</script>
</body>
</html>
