<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Oscar & Judy's Jakarta Trip</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fcfcf5;
            -webkit-tap-highlight-color: transparent;
        }
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* å¢åŠ æŒ‰éˆ•é»æ“Šçš„å›é¥‹æ„Ÿ */
        .btn-active:active {
            transform: scale(0.95);
            opacity: 0.8;
        }
    </style>
</head>
<body class="bg-[#fafaf0] text-slate-800">

<div id="app" class="relative min-h-screen pb-24">

    <!-- 1. é é¦– Header Area -->
    <!-- ä¿®æ­£ï¼šé«˜åº¦å¢åŠ åˆ° h-72ï¼Œè®“å…§å®¹ä¸æ“æ“  -->
    <div class="relative bg-slate-800 h-72 w-full overflow-hidden">
        <!-- èƒŒæ™¯åœ– -->
        <img src="https://images.unsplash.com/photo-1555899434-94d1368d7dd6?q=80&w=1000&auto=format&fit=crop" class="w-full h-full object-cover opacity-70" alt="Jakarta">
        
        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-slate-900/30 via-transparent to-slate-900/90"></div>
        
        <!-- æ¨™é¡Œæ–‡å­— -->
        <div class="absolute top-16 left-6 text-white">
            <h1 class="text-3xl font-bold shadow-black drop-shadow-md">Jakarta Trip ğŸ‡®ğŸ‡©</h1>
            <p class="text-base opacity-95 font-medium mt-1">Oscar & Judy's Adventure</p>
            <div class="inline-block bg-yellow-500/90 text-black px-2 py-0.5 rounded text-xs font-bold mt-2 shadow-sm">
                Dec 12 - Dec 15, 2025
            </div>
        </div>

        <!-- åˆ†é  Tabs -->
        <!-- ä¿®æ­£ï¼šbottom-14 æé«˜ä½ç½®ï¼Œé¿å…è¢«ä¸‹æ–¹åœ“å¼§é®æ“‹ -->
        <div class="absolute bottom-14 right-4 flex space-x-5 z-20">
            <button @click="currentTab = 'itinerary'" :class="currentTab === 'itinerary' ? 'text-yellow-400 scale-110' : 'text-white/70 hover:text-white'" class="flex flex-col items-center transition duration-200">
                <i class="fa-solid fa-map-location-dot text-2xl mb-1 drop-shadow-md"></i>
                <span class="text-[11px] font-bold shadow-black drop-shadow-sm">è¡Œç¨‹</span>
            </button>
            <button @click="currentTab = 'info'" :class="currentTab === 'info' ? 'text-yellow-400 scale-110' : 'text-white/70 hover:text-white'" class="flex flex-col items-center transition duration-200">
                <i class="fa-solid fa-circle-info text-2xl mb-1 drop-shadow-md"></i>
                <span class="text-[11px] font-bold shadow-black drop-shadow-sm">è³‡è¨Š</span>
            </button>
            <button @click="currentTab = 'shopping'" :class="currentTab === 'shopping' ? 'text-yellow-400 scale-110' : 'text-white/70 hover:text-white'" class="flex flex-col items-center transition duration-200">
                <i class="fa-solid fa-basket-shopping text-2xl mb-1 drop-shadow-md"></i>
                <span class="text-[11px] font-bold shadow-black drop-shadow-sm">æ¸…å–®</span>
            </button>
            <button @click="currentTab = 'expense'" :class="currentTab === 'expense' ? 'text-yellow-400 scale-110' : 'text-white/70 hover:text-white'" class="flex flex-col items-center transition duration-200">
                <i class="fa-solid fa-coins text-2xl mb-1 drop-shadow-md"></i>
                <span class="text-[11px] font-bold shadow-black drop-shadow-sm">èŠ±è²»</span>
            </button>
        </div>
    </div>

    <!-- åœ“å¼§éŠœæ¥è¨­è¨ˆ (è² é‚Šè·) -->
    <!-- ä¿æŒ -mt-8 å‰µé€ é‡ç–Šæ„Ÿï¼Œä½†ä¸Šæ–¹ Tabs å·²é¿é–‹ -->
    <div class="relative -mt-8 bg-[#fafaf0] rounded-t-[30px] px-4 pt-8 min-h-[calc(100vh-200px)] z-10 shadow-[0_-5px_20px_rgba(0,0,0,0.1)]">

        <!-- ===== TAB 1: æ¯æ—¥è¡Œç¨‹è¡¨ ===== -->
        <div v-if="currentTab === 'itinerary'">
            
            <!-- æ—¥æœŸé¸æ“‡å™¨ -->
            <div class="flex overflow-x-auto no-scrollbar space-x-3 mb-6 pb-2 px-1">
                <div v-for="(day, index) in days" :key="index" 
                     @click="selectedDayIndex = index"
                     :class="selectedDayIndex === index ? 'bg-slate-800 text-white shadow-lg scale-105 ring-2 ring-yellow-400 ring-offset-2' : 'bg-white text-slate-400 border border-gray-200'"
                     class="flex-shrink-0 w-16 h-20 rounded-2xl flex flex-col items-center justify-center transition-all duration-300 cursor-pointer btn-active">
                    <span class="text-xs font-medium uppercase mb-1">{{ day.weekday }}</span>
                    <span class="text-2xl font-bold">{{ day.date }}</span>
                </div>
            </div>

            <!-- å¤©æ°£ Widget -->
            <div class="bg-gradient-to-br from-blue-500 to-blue-400 rounded-2xl p-4 text-white mb-6 flex items-center justify-between shadow-lg shadow-blue-200">
                <div>
                    <div class="text-sm font-medium opacity-90"><i class="fa-solid fa-location-dot mr-1"></i>Jakarta, ID</div>
                    <div class="text-4xl font-bold mt-2">31Â°C</div>
                    <div class="text-xs mt-1 bg-white/20 inline-block px-2 py-1 rounded">é«”æ„Ÿ 36Â°C â€¢ æ¿•åº¦é«˜</div>
                </div>
                <div class="text-5xl opacity-90 drop-shadow-sm">
                    <i class="fa-solid fa-cloud-sun"></i>
                </div>
            </div>

            <!-- è¡Œç¨‹åˆ—è¡¨ -->
            <div class="space-y-6">
                <div v-for="(item, index) in filteredItinerary" :key="item.id" class="relative pl-4 border-l-[3px] border-dotted border-gray-300 last:border-0 pb-2">
                    
                    <!-- äº¤é€šæ™‚é–“ (é¡¯ç¤ºåœ¨å¡ç‰‡ä¸Šæ–¹) -->
                    <div v-if="index > 0 || (index === 0 && selectedDayIndex > 0)" class="absolute -left-[20px] -top-5 bg-white text-slate-500 text-[10px] px-2 py-1 rounded-full border border-gray-200 flex items-center gap-1 shadow-sm font-medium z-10">
                        <i class="fa-solid fa-person-walking text-blue-500"></i>
                        <span>ç´„ {{ item.travelTime || '15' }} min</span>
                    </div>

                    <!-- è¡Œç¨‹å¡ç‰‡ (ç§»é™¤æœ€å¤–å±¤ click äº‹ä»¶ï¼Œé˜²æ­¢èª¤è§¸) -->
                    <div class="bg-white p-4 rounded-xl shadow-[0_2px_8px_rgba(0,0,0,0.05)] border border-gray-100 relative group">
                        
                        <!-- é¡åˆ¥æ¨™ç±¤ -->
                        <div class="flex justify-between items-start mb-2">
                            <span :class="getCategoryColor(item.category)" class="text-[10px] font-bold px-2 py-0.5 rounded text-white shadow-sm">
                                {{ item.category }}
                            </span>
                            
                            <!-- ä¿®æ­£ï¼šç¨ç«‹çš„å°èˆªæŒ‰éˆ• (é˜²æ­¢èª¤è§¸) -->
                            <button @click.stop="openMap(item.name)" class="btn-active bg-blue-50 text-blue-600 px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1.5 border border-blue-100 hover:bg-blue-100 transition">
                                <i class="fa-solid fa-location-arrow"></i>
                                å°èˆª
                            </button>
                        </div>

                        <div class="flex items-start gap-3">
                            <!-- åœ–ç¤º -->
                            <div class="mt-1 text-slate-400 w-8 flex justify-center">
                                <i :class="getCategoryIcon(item.category)" class="text-xl"></i>
                            </div>
                            
                            <!-- å…§å®¹ -->
                            <div class="flex-1">
                                <h3 class="font-bold text-lg text-slate-800 leading-tight">{{ item.name }}</h3>
                                
                                <div class="flex flex-wrap items-center gap-2 mt-2">
                                    <span v-if="item.time" class="bg-gray-100 px-2 py-0.5 rounded text-xs text-slate-600 font-mono font-medium">
                                        <i class="fa-regular fa-clock mr-1"></i>{{ item.time }}
                                    </span>
                                    <span v-if="item.duration" class="text-xs text-gray-400">
                                        <i class="fa-solid fa-hourglass-half mr-1"></i>{{ item.duration }}
                                    </span>
                                </div>

                                <!-- ä¿®æ­£ï¼šå­—é«”æ”¾å¤§ (text-sm)ï¼ŒåŠ æ·±é¡è‰²ï¼Œå¢åŠ è¡Œé«˜ -->
                                <div v-if="item.notes" class="mt-3 p-3 bg-[#fffbe6] rounded-lg border border-yellow-100">
                                    <p class="text-sm font-medium text-slate-700 leading-relaxed">
                                        {{ item.notes }}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- æ’åº/åˆªé™¤ æ§åˆ¶é … -->
                        <div class="flex justify-end mt-3 pt-2 border-t border-gray-50 gap-4">
                            <button @click.stop="moveItem(index, -1)" class="text-gray-300 hover:text-blue-500 text-sm px-2 py-1"><i class="fa-solid fa-arrow-up"></i></button>
                            <button @click.stop="moveItem(index, 1)" class="text-gray-300 hover:text-blue-500 text-sm px-2 py-1"><i class="fa-solid fa-arrow-down"></i></button>
                            <button @click.stop="deleteItineraryItem(item.id)" class="text-gray-300 hover:text-red-500 text-sm px-2 py-1"><i class="fa-regular fa-trash-can"></i></button>
                        </div>
                    </div>
                </div>

                <!-- ç„¡è¡Œç¨‹æç¤º -->
                <div v-if="filteredItinerary.length === 0" class="flex flex-col items-center justify-center py-12 text-gray-300">
                    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3">
                        <i class="fa-solid fa-mug-hot text-2xl"></i>
                    </div>
                    <p class="text-sm">ä»Šå¤©å¯ä»¥ç¡åˆ°è‡ªç„¶é†’ï½</p>
                </div>
            </div>

            <!-- æ–°å¢æŒ‰éˆ• -->
            <button @click="showAddModal = true" class="fixed bottom-6 right-6 bg-slate-800 text-white w-14 h-14 rounded-full shadow-2xl shadow-slate-400 flex items-center justify-center text-2xl z-50 btn-active border-2 border-white/20">
                <i class="fa-solid fa-plus"></i>
            </button>
        </div>


        <!-- ===== TAB 2: è³‡è¨Š ===== -->
        <div v-if="currentTab === 'info'" class="space-y-6 pb-20 animate-fade-in">
            <!-- åŒ¯ç‡æ›ç®— -->
            <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                <h3 class="font-bold text-slate-700 mb-4 flex items-center gap-2">
                    <span class="w-1 h-5 bg-yellow-500 rounded-full"></span>
                    åŒ¯ç‡æ›ç®— (IDR â‡„ HKD)
                </h3>
                <div class="flex items-center gap-2 mb-3">
                    <div class="flex-1">
                        <label class="text-xs text-gray-400 block mb-1">å°å°¼ç›¾ (IDR)</label>
                        <input type="number" v-model="calcIDR" @input="convertCurrency('IDR')" class="w-full bg-gray-50 rounded-lg p-3 font-mono font-bold text-lg outline-none focus:ring-2 focus:ring-yellow-400 text-slate-700" placeholder="0">
                    </div>
                    <i class="fa-solid fa-right-left text-gray-300 mt-5"></i>
                    <div class="flex-1">
                        <label class="text-xs text-gray-400 block mb-1">æ¸¯å¹£ (HKD)</label>
                        <input type="number" v-model="calcHKD" @input="convertCurrency('HKD')" class="w-full bg-gray-50 rounded-lg p-3 font-mono font-bold text-lg outline-none focus:ring-2 focus:ring-yellow-400 text-slate-700" placeholder="0">
                    </div>
                </div>
                <p class="text-[10px] text-gray-400 text-center bg-gray-50 py-1 rounded">åƒè€ƒåŒ¯ç‡: 1 HKD â‰ˆ 2,050 IDR</p>
            </div>

            <!-- èˆªç­è³‡è¨Š -->
            <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-100">
                <div class="bg-slate-800 text-white p-3 px-5 flex justify-between items-center">
                    <span class="font-bold"><i class="fa-solid fa-plane-departure mr-2"></i>å»ç¨‹èˆªç­</span>
                    <span class="text-xs font-mono bg-white/20 px-2 py-1 rounded">12 Dec</span>
                </div>
                <div class="p-5">
                    <div class="flex justify-between items-center mb-4">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-slate-800">HKG</div>
                            <div class="text-xs text-gray-500">é¦™æ¸¯</div>
                        </div>
                        <div class="flex flex-col items-center px-4 w-full">
                            <div class="text-xs text-gray-400 mb-1">03h 55m</div>
                            <div class="w-full h-[2px] bg-gray-200 relative">
                                <i class="fa-solid fa-plane absolute top-1/2 left-1/2 transform -translate-y-1/2 -translate-x-1/2 text-slate-300 bg-white px-2"></i>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-slate-800">CGK</div>
                            <div class="text-xs text-gray-500">é›…åŠ é”</div>
                        </div>
                    </div>
                    <div class="flex justify-between text-base font-bold text-slate-700 mb-4">
                        <span>19:05</span>
                        <span>23:00</span>
                    </div>
                    <div class="bg-gray-50 p-3 rounded-lg flex items-center justify-center gap-2 text-sm text-slate-600">
                        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/9/90/Cathay_Pacific_logo.svg/1200px-Cathay_Pacific_logo.svg.png" class="h-4 opacity-70">
                        <span class="font-bold">CX 797</span> (åœ‹æ³°èˆªç©º)
                    </div>
                </div>
            </div>

            <!-- ä½å®¿è³‡è¨Š -->
            <div class="bg-white rounded-2xl shadow-sm overflow-hidden border border-gray-100">
                <div class="bg-indigo-600 text-white p-3 px-5">
                    <span class="font-bold"><i class="fa-solid fa-hotel mr-2"></i>ä½å®¿é£¯åº—</span>
                </div>
                <div class="p-5">
                    <h3 class="font-bold text-lg text-slate-800">Pullman Jakarta Thamrin</h3>
                    <p class="text-sm text-gray-500 mt-2 leading-relaxed"><i class="fa-solid fa-map-pin mr-1 text-red-400"></i> Jl. M.H. Thamrin No.59, Jakarta</p>
                    <div class="mt-4 flex gap-3">
                        <button @click="openMap('Pullman Jakarta Thamrin')" class="flex-1 bg-indigo-50 text-indigo-700 py-2.5 rounded-lg text-sm font-bold hover:bg-indigo-100 transition flex items-center justify-center gap-2 btn-active">
                            <i class="fa-solid fa-location-arrow"></i> å°èˆª
                        </button>
                        <a href="tel:+622131921111" class="flex-1 bg-gray-100 text-slate-700 py-2.5 rounded-lg text-sm font-bold hover:bg-gray-200 text-center flex items-center justify-center gap-2 btn-active">
                            <i class="fa-solid fa-phone"></i> æ’¥æ‰“
                        </a>
                    </div>
                </div>
            </div>

            <!-- ç§Ÿè»Š/ç·Šæ€¥ -->
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center">
                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2 text-green-600">
                        <i class="fa-solid fa-car text-lg"></i>
                    </div>
                    <h4 class="font-bold text-sm text-slate-700">ç§Ÿè»Šè³‡è¨Š</h4>
                    <p class="text-xs text-gray-400 mt-1">å°šæœªè¨­å®š</p>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center">
                    <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-2 text-red-600">
                        <i class="fa-solid fa-truck-medical text-lg"></i>
                    </div>
                    <h4 class="font-bold text-sm text-slate-700">ç·Šæ€¥æ±‚åŠ©</h4>
                    <a href="tel:112" class="text-xs text-red-500 font-bold mt-1 block bg-red-50 py-1 rounded">æ’¥æ‰“ 112</a>
                </div>
            </div>
        </div>


        <!-- ===== TAB 3: è³¼ç‰©æ¸…å–® ===== -->
        <div v-if="currentTab === 'shopping'" class="pb-20">
            <h3 class="font-bold text-slate-700 mb-4 flex items-center gap-2 pl-2">
                <span class="w-1 h-5 bg-yellow-500 rounded-full"></span>
                è³¼ç‰©æ¸…å–®
            </h3>
            
            <div class="grid grid-cols-2 gap-4">
                <div v-for="(item, index) in shoppingList" :key="index" class="bg-white p-3 rounded-xl shadow-sm border border-gray-100 flex flex-col relative group">
                    <button @click="deleteShoppingItem(index)" class="absolute top-2 right-2 w-6 h-6 bg-white/80 rounded-full shadow flex items-center justify-center text-gray-400 hover:text-red-500 z-10">
                        <i class="fa-solid fa-xmark text-xs"></i>
                    </button>
                    <div class="aspect-square bg-gray-50 rounded-lg mb-2 overflow-hidden flex items-center justify-center text-gray-300 relative">
                        <img v-if="item.image" :src="item.image" class="w-full h-full object-cover">
                        <i v-else class="fa-solid fa-image text-3xl opacity-20"></i>
                    </div>
                    <div class="font-bold text-sm truncate text-slate-800">{{ item.name }}</div>
                    <div class="text-xs text-gray-400 mt-1 flex items-center gap-1">
                        <i class="fa-solid fa-shop text-[10px]"></i>
                        {{ item.location || 'æœªå®š' }}
                    </div>
                </div>
            </div>
            
            <div v-if="shoppingList.length === 0" class="text-center py-10 text-gray-400">
                <i class="fa-solid fa-basket-shopping text-4xl mb-2 opacity-30"></i>
                <p class="text-sm">é‚„æ²’æœ‰æƒ³è²·çš„æ±è¥¿å—ï¼Ÿ</p>
            </div>

             <!-- æ–°å¢æŒ‰éˆ• -->
             <button @click="showShoppingModal = true" class="fixed bottom-6 right-6 bg-yellow-500 text-white w-14 h-14 rounded-full shadow-2xl shadow-yellow-200 flex items-center justify-center text-2xl z-50 btn-active border-2 border-white/20">
                <i class="fa-solid fa-plus"></i>
            </button>
        </div>


        <!-- ===== TAB 4: èŠ±è²» ===== -->
        <div v-if="currentTab === 'expense'" class="pb-20">
            <!-- ç¸½èŠ±è²»å¡ç‰‡ -->
            <div class="bg-slate-800 text-white p-6 rounded-2xl shadow-xl mb-6 relative overflow-hidden">
                <div class="absolute -right-6 -top-6 w-32 h-32 bg-white/5 rounded-full blur-2xl"></div>
                <div class="relative z-10">
                    <div class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-1">Total Expense</div>
                    <div class="flex items-baseline gap-2">
                        <span class="text-lg text-gray-400">HKD</span>
                        <span class="text-4xl font-bold font-mono">{{ totalExpenseHKD.toLocaleString() }}</span>
                    </div>
                    <div class="mt-3 pt-3 border-t border-white/10 flex justify-between items-center">
                        <div class="text-xs text-yellow-400 font-mono">â‰ˆ IDR {{ (totalExpenseHKD * 2050).toLocaleString() }}</div>
                        <div class="text-xs text-gray-500">{{ expenses.length }} ç­†ç´€éŒ„</div>
                    </div>
                </div>
            </div>

            <!-- èŠ±è²»åˆ—è¡¨ -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="p-4 border-b border-gray-100 font-bold text-slate-700 bg-gray-50/50">æ”¯å‡ºç´€éŒ„æ˜ç´°</div>
                <div class="divide-y divide-gray-100">
                    <div v-for="(exp, index) in expenses" :key="index" class="p-4 flex justify-between items-center hover:bg-gray-50 transition">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-slate-500 shrink-0">
                                <i :class="getExpenseIcon(exp.category)"></i>
                            </div>
                            <div>
                                <div class="font-bold text-sm text-slate-800">{{ exp.name }}</div>
                                <div class="text-xs text-gray-400 mt-0.5">{{ exp.date }} â€¢ <span class="bg-gray-100 px-1 rounded">{{ exp.payment }}</span></div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-slate-800 font-mono">-{{ Number(exp.amount).toLocaleString() }}</div>
                            <button @click="deleteExpense(index)" class="text-[10px] text-red-300 hover:text-red-500 mt-1">åˆªé™¤</button>
                        </div>
                    </div>
                    <div v-if="expenses.length === 0" class="p-8 text-center text-gray-400 text-sm">
                        å°šæœªæœ‰æ”¯å‡ºç´€éŒ„
                    </div>
                </div>
            </div>

            <!-- æ–°å¢æŒ‰éˆ• -->
            <button @click="showExpenseModal = true" class="fixed bottom-6 right-6 bg-green-600 text-white w-14 h-14 rounded-full shadow-2xl shadow-green-200 flex items-center justify-center text-2xl z-50 btn-active border-2 border-white/20">
                <i class="fa-solid fa-plus"></i>
            </button>
        </div>

    </div>

    <!-- ===== Modals (å½ˆå‡ºè¦–çª—) ===== -->

    <!-- æ–°å¢è¡Œç¨‹ Modal -->
    <div v-if="showAddModal" class="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto transition-opacity" @click="showAddModal = false"></div>
        <div class="bg-white w-full sm:w-96 p-6 rounded-t-3xl sm:rounded-3xl pointer-events-auto shadow-2xl transform transition-transform duration-300">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
            <h3 class="font-bold text-xl mb-5 text-slate-800">æ–°å¢è¡Œç¨‹</h3>
            <div class="space-y-4">
                <div>
                    <label class="text-xs font-bold text-gray-400 mb-1 block">åç¨±</label>
                    <input v-model="newItem.name" placeholder="ä¾‹å¦‚: å»åƒæ™šé¤" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-slate-800 outline-none transition">
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="text-xs font-bold text-gray-400 mb-1 block">åˆ†é¡</label>
                        <select v-model="newItem.category" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl outline-none">
                            <option value="æ™¯é»">æ™¯é»</option>
                            <option value="ç¾é£Ÿ">ç¾é£Ÿ</option>
                            <option value="è³¼ç‰©">è³¼ç‰©</option>
                            <option value="ä½å®¿">ä½å®¿</option>
                            <option value="äº¤é€š">äº¤é€š</option>
                        </select>
                    </div>
                    <div>
                         <label class="text-xs font-bold text-gray-400 mb-1 block">æ™‚é–“ (èµ·-è¿„)</label>
                        <div class="flex gap-1">
                            <input type="time" v-model="newItem.startTime" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl text-xs text-center outline-none">
                            <input type="time" v-model="newItem.endTime" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl text-xs text-center outline-none">
                        </div>
                    </div>
                </div>

                <div>
                    <label class="text-xs font-bold text-gray-400 mb-1 block">å‚™è¨»</label>
                    <textarea v-model="newItem.notes" placeholder="ç‰¹è‰²ã€ç­†è¨˜..." rows="2" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl outline-none resize-none"></textarea>
                </div>

                <button @click="addNewItinerary" class="w-full bg-slate-800 text-white py-4 rounded-xl font-bold mt-2 shadow-lg shadow-slate-300 active:scale-95 transition">ç¢ºèªæ–°å¢</button>
            </div>
        </div>
    </div>

    <!-- æ–°å¢è³¼ç‰© Modal -->
    <div v-if="showShoppingModal" class="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto" @click="showShoppingModal = false"></div>
        <div class="bg-white w-full sm:w-96 p-6 rounded-t-3xl sm:rounded-3xl pointer-events-auto shadow-2xl">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
            <h3 class="font-bold text-xl mb-5 text-slate-800">æƒ³è²·ä»€éº¼ï¼Ÿ</h3>
            <div class="space-y-4">
                <input v-model="newShop.name" placeholder="å•†å“åç¨±" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl focus:ring-2 focus:ring-yellow-400 outline-none">
                <input v-model="newShop.location" placeholder="å“ªè£¡è²· (é¸å¡«)" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl outline-none">
                
                <label class="block bg-gray-50 border-2 border-dashed border-gray-300 p-4 rounded-xl text-center cursor-pointer hover:bg-gray-100 transition">
                    <span class="text-sm text-gray-500 font-medium"><i class="fa-solid fa-camera mr-2"></i>ä¸Šå‚³ç…§ç‰‡</span>
                    <input type="file" @change="handleImageUpload" class="hidden" accept="image/*">
                </label>
                
                <div v-if="newShop.image" class="h-32 w-full bg-gray-100 rounded-xl overflow-hidden shadow-inner">
                    <img :src="newShop.image" class="w-full h-full object-cover">
                </div>
                
                <button @click="addShoppingItem" class="w-full bg-yellow-500 text-white py-4 rounded-xl font-bold shadow-lg shadow-yellow-200 active:scale-95 transition">åŠ å…¥æ¸…å–®</button>
            </div>
        </div>
    </div>

    <!-- æ–°å¢èŠ±è²» Modal -->
    <div v-if="showExpenseModal" class="fixed inset-0 z-[60] flex items-end sm:items-center justify-center pointer-events-none">
        <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto" @click="showExpenseModal = false"></div>
        <div class="bg-white w-full sm:w-96 p-6 rounded-t-3xl sm:rounded-3xl pointer-events-auto shadow-2xl">
            <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
            <h3 class="font-bold text-xl mb-5 text-slate-800">è¨˜ä¸€ç­†</h3>
            <div class="space-y-4">
                <input v-model="newExpense.name" placeholder="é …ç›®åç¨± (å¦‚: åˆé¤)" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl outline-none">
                <div class="relative">
                    <span class="absolute left-4 top-3.5 text-gray-400 font-bold">HKD</span>
                    <input type="number" v-model="newExpense.amount" placeholder="0" class="w-full bg-gray-50 border border-gray-200 p-3 pl-14 rounded-xl font-mono font-bold text-lg outline-none focus:ring-2 focus:ring-green-500">
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <select v-model="newExpense.category" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl outline-none">
                        <option value="é£²é£Ÿ">é£²é£Ÿ</option>
                        <option value="äº¤é€š">äº¤é€š</option>
                        <option value="è³¼ç‰©">è³¼ç‰©</option>
                        <option value="ä½å®¿">ä½å®¿</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                    <select v-model="newExpense.payment" class="w-full bg-gray-50 border border-gray-200 p-3 rounded-xl outline-none">
                        <option value="ç¾é‡‘">ç¾é‡‘</option>
                        <option value="ä¿¡ç”¨å¡">ä¿¡ç”¨å¡</option>
                    </select>
                </div>
                
                <button @click="addExpense" class="w-full bg-green-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-green-200 active:scale-95 transition">å„²å­˜ç´€éŒ„</button>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                currentTab: 'itinerary',
                selectedDayIndex: 0,
                showAddModal: false,
                showShoppingModal: false,
                showExpenseModal: false,
                
                // åŒ¯ç‡
                calcIDR: '',
                calcHKD: '',
                rate: 0.00049, // 1 IDR = 0.00049 HKD (ç´„ç•¥)

                // åˆå§‹è¡Œç¨‹è³‡æ–™
                days: [
                    { weekday: 'Fri', date: '12', fullDate: '2025-12-12' },
                    { weekday: 'Sat', date: '13', fullDate: '2025-12-13' },
                    { weekday: 'Sun', date: '14', fullDate: '2025-12-14' },
                    { weekday: 'Mon', date: '15', fullDate: '2025-12-15' }
                ],
                itinerary: [
                    // Day 1 (12 Dec)
                    { id: 1, date: '2025-12-12', name: 'HKG - CGK (CX 797)', time: '19:05 - 23:00', duration: '03h 55m', category: 'äº¤é€š', notes: 'åœ‹æ³°èˆªç©º | è«‹ææ—© 2 å°æ™‚åˆ°æ©Ÿå ´', travelTime: '' },
                    { id: 2, date: '2025-12-12', name: 'Immigrations & Luggage', time: '23:00 - 23:45', duration: '45m', category: 'å…¶ä»–', notes: 'éæµ·é—œåŠé ˜å–è¡Œæ', travelTime: '0 min' },
                    { id: 3, date: '2025-12-12', name: 'Check In Pullman Jakarta', time: '23:45 - 01:00', duration: '1h 15m', category: 'ä½å®¿', notes: 'PULLMAN Jakarta Thamrin Check-in', travelTime: '45 min' },

                    // Day 2 (13 Dec)
                    { id: 4, date: '2025-12-13', name: 'Bakmi Krekot', time: '09:00 - 10:30', duration: '1h 30m', category: 'ç¾é£Ÿ', notes: 'é“åœ°æ—©é¤é«”é©—', travelTime: '30 min' },
                    { id: 5, date: '2025-12-13', name: 'Sarinah', time: '10:30 - 12:45', duration: '2h 15m', category: 'è³¼ç‰©', notes: 'Hunting Batik (è ŸæŸ“)', travelTime: '30 min' },
                    { id: 6, date: '2025-12-13', name: 'Lekko (Grand Indonesia)', time: '12:45 - 14:00', duration: '1h 15m', category: 'ç¾é£Ÿ', notes: 'åˆé¤æ™‚é–“', travelTime: '15 min' },
                    { id: 7, date: '2025-12-13', name: 'Ranch Market & Food Hall', time: '14:00 - 15:30', duration: '1h 30m', category: 'è³¼ç‰©', notes: 'Visit Supermarket (GI & PI)', travelTime: '15 min' },
                    { id: 8, date: '2025-12-13', name: 'Hotel Rest', time: '16:00 - 19:00', duration: '3h', category: 'ä½å®¿', notes: 'å›é£¯åº—ä¼‘æ¯ & æº–å‚™åƒåŠ å©šç¦®', travelTime: '30 min' },
                    { id: 9, date: '2025-12-13', name: 'Wedding Party', time: '19:00 - 21:00', duration: '2h', category: 'å…¶ä»–', notes: 'åƒåŠ å©šç¦®æ™šå®´', travelTime: '30 min' },

                    // Day 3 (14 Dec)
                    { id: 10, date: '2025-12-14', name: 'Soto Gubeng', time: '09:00 - 10:30', duration: '1h 30m', category: 'ç¾é£Ÿ', notes: 'æ—©é¤', travelTime: '30 min' },
                    { id: 11, date: '2025-12-14', name: 'Market City PIK', time: '10:30 - 12:15', duration: '1h 45m', category: 'è³¼ç‰©', notes: 'Explore Supermarket', travelTime: '45 min' },
                    { id: 12, date: '2025-12-14', name: 'Bandar Djakarta PIK', time: '12:15 - 14:00', duration: '1h 45m', category: 'ç¾é£Ÿ', notes: 'Lunch æµ·é®®é¤å»³', travelTime: '15 min' },
                    { id: 13, date: '2025-12-14', name: 'Lotte Grosir Kelapa Gading', time: '14:00 - 16:00', duration: '2h', category: 'è³¼ç‰©', notes: 'Wholesaler (æ‰¹ç™¼è³£å ´)', travelTime: '60 min' },
                    { id: 14, date: '2025-12-14', name: 'Grand Lucky', time: '16:00 - 17:45', duration: '1h 45m', category: 'è³¼ç‰©', notes: 'Supermarket æ¡è³¼', travelTime: '45 min' },
                    { id: 15, date: '2025-12-14', name: 'Pagi Sore Cipete', time: '17:45 - 19:30', duration: '1h 45m', category: 'ç¾é£Ÿ', notes: 'Dinner (çŸ¥åå·´æ±èœ)', travelTime: '30 min' },

                     // Day 4 (15 Dec)
                     { id: 16, date: '2025-12-15', name: 'Bakmi ABUN Gang Kelinci', time: '09:00 - 10:30', duration: '1h 30m', category: 'ç¾é£Ÿ', notes: 'Pasar Baru å€åŸŸæ—©é¤', travelTime: '30 min' },
                     { id: 17, date: '2025-12-15', name: 'Airport (CGK)', time: '11:30 - 21:30', duration: '-', category: 'äº¤é€š', notes: 'å‰å¾€æ©Ÿå ´ & æº–å‚™ç™»æ©Ÿ', travelTime: '60 min' }
                ],
                
                // æ–°å¢é …ç›®æš«å­˜å€
                newItem: { name: '', category: 'æ™¯é»', startTime: '', endTime: '', notes: '' },
                newShop: { name: '', location: '', image: null },
                newExpense: { name: '', amount: '', category: 'é£²é£Ÿ', payment: 'ç¾é‡‘' },

                // è³‡æ–™å®¹å™¨
                shoppingList: [],
                expenses: []
            }
        },
        computed: {
            filteredItinerary() {
                const targetDate = this.days[this.selectedDayIndex].fullDate;
                return this.itinerary.filter(item => item.date === targetDate);
            },
            totalExpenseHKD() {
                return this.expenses.reduce((sum, item) => sum + Number(item.amount), 0);
            }
        },
        created() {
            // è®€å– localStorage
            const savedShopping = localStorage.getItem('jakarta_shopping');
            if (savedShopping) this.shoppingList = JSON.parse(savedShopping);
            
            const savedExpenses = localStorage.getItem('jakarta_expenses');
            if (savedExpenses) this.expenses = JSON.parse(savedExpenses);

            const savedItinerary = localStorage.getItem('jakarta_itinerary');
            if (savedItinerary) this.itinerary = JSON.parse(savedItinerary);
        },
        methods: {
            saveData() {
                localStorage.setItem('jakarta_shopping', JSON.stringify(this.shoppingList));
                localStorage.setItem('jakarta_expenses', JSON.stringify(this.expenses));
                localStorage.setItem('jakarta_itinerary', JSON.stringify(this.itinerary));
            },
            
            // è¡Œç¨‹ç›¸é—œ
            getCategoryColor(cat) {
                const map = { 'æ™¯é»': 'bg-blue-500', 'ä½å®¿': 'bg-indigo-500', 'ç¾é£Ÿ': 'bg-orange-500', 'è³¼ç‰©': 'bg-pink-500', 'äº¤é€š': 'bg-slate-500', 'å…¶ä»–': 'bg-gray-400' };
                return map[cat] || 'bg-gray-400';
            },
            getCategoryIcon(cat) {
                const map = { 'æ™¯é»': 'fa-camera', 'ä½å®¿': 'fa-bed', 'ç¾é£Ÿ': 'fa-utensils', 'è³¼ç‰©': 'fa-bag-shopping', 'äº¤é€š': 'fa-plane', 'å…¶ä»–': 'fa-circle' };
                return `fa-solid ${map[cat] || 'fa-circle'}`;
            },
            openMap(location) {
                // é–‹å•Ÿ Google Maps
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location + " Jakarta")}`, '_blank');
            },
            moveItem(index, direction) {
                const list = this.filteredItinerary;
                const item = list[index];
                const realIndex = this.itinerary.indexOf(item);
                
                const targetListIndex = index + direction;
                if (targetListIndex < 0 || targetListIndex >= list.length) return;
                
                const targetItem = list[targetListIndex];
                const targetRealIndex = this.itinerary.indexOf(targetItem);

                [this.itinerary[realIndex], this.itinerary[targetRealIndex]] = [this.itinerary[targetRealIndex], this.itinerary[realIndex]];
                this.saveData();
            },
            deleteItineraryItem(id) {
                if(confirm('ç¢ºå®šè¦åˆªé™¤æ­¤è¡Œç¨‹å—ï¼Ÿ')) {
                    this.itinerary = this.itinerary.filter(i => i.id !== id);
                    this.saveData();
                }
            },
            addNewItinerary() {
                if(!this.newItem.name) return alert('è«‹è¼¸å…¥åç¨±');
                const targetDate = this.days[this.selectedDayIndex].fullDate;
                const timeStr = (this.newItem.startTime && this.newItem.endTime) ? `${this.newItem.startTime} - ${this.newItem.endTime}` : '';

                this.itinerary.push({
                    id: Date.now(),
                    date: targetDate,
                    name: this.newItem.name,
                    category: this.newItem.category,
                    time: timeStr,
                    duration: '',
                    notes: this.newItem.notes,
                    travelTime: '30 min'
                });
                this.saveData();
                this.showAddModal = false;
                this.newItem = { name: '', category: 'æ™¯é»', startTime: '', endTime: '', notes: '' };
            },

            // åŒ¯ç‡
            convertCurrency(type) {
                if (type === 'IDR') {
                    this.calcHKD = (this.calcIDR * this.rate).toFixed(2);
                } else {
                    this.calcIDR = (this.calcHKD / this.rate).toFixed(0);
                }
            },

            // è³¼ç‰©
            handleImageUpload(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        this.newShop.image = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            },
            addShoppingItem() {
                if(!this.newShop.name) return;
                this.shoppingList.push({...this.newShop});
                this.saveData();
                this.showShoppingModal = false;
                this.newShop = { name: '', location: '', image: null };
            },
            deleteShoppingItem(index) {
                if(confirm('ç¢ºå®šåˆªé™¤ï¼Ÿ')) {
                    this.shoppingList.splice(index, 1);
                    this.saveData();
                }
            },

            // èŠ±è²»
            getExpenseIcon(cat) {
                const map = { 'äº¤é€š': 'fa-taxi', 'é£²é£Ÿ': 'fa-utensils', 'ä½å®¿': 'fa-hotel', 'è³¼ç‰©': 'fa-bag-shopping', 'å…¶ä»–': 'fa-coins' };
                return `fa-solid ${map[cat] || 'fa-coins'}`;
            },
            addExpense() {
                if(!this.newExpense.name || !this.newExpense.amount) return;
                const today = new Date().toLocaleDateString();
                this.expenses.push({ ...this.newExpense, date: today });
                this.saveData();
                this.showExpenseModal = false;
                this.newExpense = { name: '', amount: '', category: 'é£²é£Ÿ', payment: 'ç¾é‡‘' };
            },
            deleteExpense(index) {
                if(confirm('åˆªé™¤æ­¤ç­†æ¶ˆè²»ç´€éŒ„ï¼Ÿ')) {
                    this.expenses.splice(index, 1);
                    this.saveData();
                }
            }
        }
    }).mount('#app');
</script>
</body>
</html>
